<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-linux/dm">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.21">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0DX1KGD5E4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0DX1KGD5E4",{})</script><title data-rh="true">Device Mapper | Zoned Storage</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zonedstorage.io/docs/linux/dm"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Device Mapper | Zoned Storage"><meta data-rh="true" name="description" content="Zoned block device support was added to the device mapper subsystem in kernel"><meta data-rh="true" property="og:description" content="Zoned block device support was added to the device mapper subsystem in kernel"><link data-rh="true" rel="icon" href="/img/zs-logo.ico"><link data-rh="true" rel="canonical" href="https://zonedstorage.io/docs/linux/dm"><link data-rh="true" rel="alternate" href="https://zonedstorage.io/docs/linux/dm" hreflang="en"><link data-rh="true" rel="alternate" href="https://zonedstorage.io/docs/linux/dm" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.028cc568.css">
<link rel="preload" href="/assets/js/runtime~main.a0f59103.js" as="script">
<link rel="preload" href="/assets/js/main.d8e174d5.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedImage_ToTc themedImage--light_HNdA"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Zoned Storage</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">Documentation</a><a class="navbar__item navbar__link" href="/docs/community/support">Community</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/westerndigitalcorporation/zonedstorage.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/introduction">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/getting-started">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/linux">Linux Kernel Support</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/overview">Linux Kernel Zoned Storage Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/config">Kernel Configuration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/zbd-api">Zoned Block Device User Interface</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/sched">Write Ordering Control</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/part">Zoned Block Device Partition Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/linux/dm">Device Mapper</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/linux/fs">File Systems</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/applications">Applications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tools">Tools and Libraries</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/tests">System Compliance Tests</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/benchmarking">Performance Benchmarking</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/distributions/linux">Linux Distributions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">Frequently Asked Questions</a></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_GujU"><div class="docItemContainer_Adtb"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Linux Kernel Support</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Device Mapper</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_aoJ5"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Device Mapper</h1><p>Zoned block device support was added to the device mapper subsystem in kernel
version 4.13. Two existing targets gained support: the <em>dm-linear</em> target and
the <em>dm-flakey</em> target. ZBD support also added a new target driver, <em>dm-zoned</em>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dm-linear">dm-linear<a class="hash-link" href="#dm-linear" title="Direct link to heading">​</a></h2><p>The <em>dm-linear</em> target maps a linear range of blocks of the device-mapper device
onto a linear range on a backend device. <em>dm-linear</em> is the basic building
block of logical volume managers like <a href="http://www.sourceware.org/lvm2/" target="_blank" rel="noopener noreferrer"><em>LVM</em></a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zoned-block-device-restrictions">Zoned Block Device Restrictions<a class="hash-link" href="#zoned-block-device-restrictions" title="Direct link to heading">​</a></h3><p>When used with zoned block devices, the <em>dm-linear</em> device that is created will
also be a zoned block device with the same zone size as the underlying device.
Several conditions are enforced by the device-mapper core-management code
during the creation of a <em>dm-linear</em> target device.</p><ul><li>All backend devices used to map different ranges of the target device must
have the same zone model.</li><li>If the backend devices are zoned block devices, all devices must have the same
zone size.</li><li>The mapped ranges must be zone aligned, that is, partial zone mapping is not
possible.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-creating-a-small-host-managed-disk">Example: Creating a Small Host Managed Disk<a class="hash-link" href="#example-creating-a-small-host-managed-disk" title="Direct link to heading">​</a></h3><p>This example illustrates how to create a small host-managed disk that uses zone
ranges from a large high capacity host-managed disk. The zone information of
the backend device used is shown below.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/sdb/queue/zoned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host-managed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/sdb/queue/chunk_sectors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">524288</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># blkzone report /dev/sdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000000000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000080000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000100000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000180000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x010580000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x010600000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x010680000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x010700000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x6d2300000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x6d2380000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To create a <em>dm-linear</em> device named &quot;small-sdb&quot; that joins the first 5
conventional zones of the backend device with the first 10 sequential zones,
use the following command.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># echo &quot;0 2621440 linear /dev/sdb 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">2621440 5242880 linear /dev/sdb 274726912&quot; | dmsetup create small-sdb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The resulting device zone model is host-managed and has 15 zones, as shown
below.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/dm-0/queue/zoned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host-managed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/dm-0/queue/chunk_sectors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">524288</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># blkzone report /dev/dm-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000000000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000080000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000100000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000180000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000200000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000280000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000300000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000380000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000400000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000480000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000500000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000580000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000600000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000680000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000700000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 1(em) [type: 2(SEQ_WRITE_REQUIRED)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The following shows a script that facilitates the creation of <em>dm-linear</em>
devices using zone ranges from a single zoned block device. Such small zoned
block devices can be used to test application limits (e.g. Disk full
conditions).</p><div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token shebang important">#!/bin/bash</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">$#</span><span class="token plain"> -ne </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Usage: </span><span class="token string variable" style="color:#36acaa">$0</span><span class="token string" style="color:#e3116c"> &lt;disk&gt; &lt;num conv zones&gt; &lt;num seq zones&gt;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">disk</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$1</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">nrconv</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$2</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">nrseq</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">dname</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token string variable" style="color:#36acaa">$(</span><span class="token string variable function" style="color:#d73a49">basename</span><span class="token string variable" style="color:#36acaa"> $</span><span class="token string variable punctuation" style="color:#393A34">{</span><span class="token string variable" style="color:#36acaa">disk</span><span class="token string variable punctuation" style="color:#393A34">}</span><span class="token string variable" style="color:#36acaa">)</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Linear table entries: &quot;start length linear device offset&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># start: starting block in virtual device</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># length: length of this segment</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># device: block device, referenced by the device name or by major:minor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># offset: starting offset of the mapping on the device</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">convlen</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$((</span><span class="token variable" style="color:#36acaa"> nrconv </span><span class="token variable operator" style="color:#393A34">*</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">524288</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable" style="color:#36acaa">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">seqlen</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$((</span><span class="token variable" style="color:#36acaa"> nrseq </span><span class="token variable operator" style="color:#393A34">*</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">524288</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable" style="color:#36acaa">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${convlen}</span><span class="token plain"> -eq </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${seqlen}</span><span class="token plain"> -eq </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0 zones...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">exit</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token assign-left variable" style="color:#36acaa">seqofst</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$(</span><span class="token variable" style="color:#36acaa">blkzone report </span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable string variable" style="color:#36acaa">$1</span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">grep</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;SEQ_WRITE_REQUIRED&quot;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"></span><br></span><span class="token-line" style="color:#393A34"><span class="token variable" style="color:#36acaa">      </span><span class="token variable function" style="color:#d73a49">head</span><span class="token variable" style="color:#36acaa"> -n1 </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">cut</span><span class="token variable" style="color:#36acaa"> -f1 -d</span><span class="token variable string" style="color:#e3116c">&#x27;,&#x27;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">cut</span><span class="token variable" style="color:#36acaa"> -f2 -d</span><span class="token variable string" style="color:#e3116c">&#x27;:&#x27;</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable operator" style="color:#393A34">|</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable function" style="color:#d73a49">xargs</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable builtin class-name" style="color:#36acaa">printf</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable string" style="color:#e3116c">&quot;%d</span><span class="token variable string entity" style="color:#36acaa">\n</span><span class="token variable string" style="color:#e3116c">&quot;</span><span class="token variable" style="color:#36acaa">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${convlen}</span><span class="token plain"> -gt </span><span class="token variable" style="color:#36acaa">${seqofst}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">nrconv</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">$((</span><span class="token variable" style="color:#36acaa"> seqofst </span><span class="token variable operator" style="color:#393A34">/</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable number" style="color:#36acaa">524288</span><span class="token variable" style="color:#36acaa"> </span><span class="token variable" style="color:#36acaa">))</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;Too many conventional zones requested: truncating to </span><span class="token string variable" style="color:#36acaa">$nrconv</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token assign-left variable" style="color:#36acaa">convlen</span><span class="token operator" style="color:#393A34">=</span><span class="token variable" style="color:#36acaa">${seqofst}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${convlen}</span><span class="token plain"> -eq </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0 </span><span class="token string variable" style="color:#36acaa">${seqlen}</span><span class="token string" style="color:#e3116c"> linear </span><span class="token string variable" style="color:#36acaa">${disk}</span><span class="token string" style="color:#e3116c"> </span><span class="token string variable" style="color:#36acaa">${seqofst}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> dmsetup create small-</span><span class="token variable" style="color:#36acaa">${dname}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">elif</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"> </span><span class="token variable" style="color:#36acaa">${seqlen}</span><span class="token plain"> -eq </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">then</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0 </span><span class="token string variable" style="color:#36acaa">${convlen}</span><span class="token string" style="color:#e3116c"> linear </span><span class="token string variable" style="color:#36acaa">${disk}</span><span class="token string" style="color:#e3116c"> 0&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> dmsetup create small-</span><span class="token variable" style="color:#36acaa">${dname}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">else</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin class-name">echo</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;0 </span><span class="token string variable" style="color:#36acaa">${convlen}</span><span class="token string" style="color:#e3116c"> linear </span><span class="token string variable" style="color:#36acaa">${disk}</span><span class="token string" style="color:#e3116c"> 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token string" style="color:#e3116c">    </span><span class="token string variable" style="color:#36acaa">${convlen}</span><span class="token string" style="color:#e3116c"> </span><span class="token string variable" style="color:#36acaa">${seqlen}</span><span class="token string" style="color:#e3116c"> linear </span><span class="token string variable" style="color:#36acaa">${disk}</span><span class="token string" style="color:#e3116c"> </span><span class="token string variable" style="color:#36acaa">${seqofst}</span><span class="token string" style="color:#e3116c">&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> dmsetup create small-</span><span class="token variable" style="color:#36acaa">${dname}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">fi</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-conventional-zones-as-a-regular-disk">Example: Conventional Zones as a Regular Disk<a class="hash-link" href="#example-conventional-zones-as-a-regular-disk" title="Direct link to heading">​</a></h3><p><em>dm-linear</em> can also be used to aggregate a zoned block device&#x27;s conventional
zones together into a target device that will be usable as a regular disk
(conventional zones can be randomly written). Reusing the previous example
backend disk, 524 conventional zones of 524288 sectors (512 B unit) are
available. The following command creates a <em>dm-linear</em> device joining all
conventional zones together.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># echo &quot;0 274726912 linear /dev/sdb 0&quot; | dmsetup create small-sdb</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The target device is again a host-managed disk but contains only conventional
zones.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/dm-0/queue/zoned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">host-managed</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/dm-0/queue/chunk_sectors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">524288</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># blkzone report /dev/dm-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000000000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000080000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000100000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x000180000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x010500000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  start: 0x010580000, len 0x080000, wptr 0x000000 reset:0 non-seq:0, zcond: 0(nw) [type: 1(CONVENTIONAL)]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Because this zoned block device is composed entirely of conventional zones, all
sectors are randomly writable and can therefore be used directly with any file
system.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># mkfs.ext4 /dev/dm-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mke2fs 1.44.6 (5-Mar-2019)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Creating filesystem with 34340864 4k blocks and 8585216 inodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem UUID: 3957429a-5dab-4b30-9797-f9736036a47b</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Superblock backups stored on blocks:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    4096000, 7962624, 11239424, 20480000, 23887872</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Allocating group tables: done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing inode tables: done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Creating journal (262144 blocks): done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing superblocks and filesystem accounting information: done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># mount /dev/dm-0 /mnt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ls -l /mnt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwx------ 2 root root 16384 May 21 17:03 lost+found</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Applications that need frequent random updates to their metadata can use such
setups to facilitate the implementation of a complex metadata structure. The
remaining sequential zones of the disk can be used directly by the application
to store data.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dm-flakey">dm-flakey<a class="hash-link" href="#dm-flakey" title="Direct link to heading">​</a></h2><p>The <em>dm-flakey</em> target is similar to the <em>dm-linear</em> target, except that it
periodically exhibits unreliable behavior. This target is useful for simulating
failing devices during testing. In the case of zoned block devices,
simulating write errors to sequential zones can help to debug application
write-pointer management.</p><p><em>dm-flakey</em> works like this: at the time the table is loaded, the device does
not generate errors for some seconds (<em>up</em> time), but then exhibits unreliable
behavior for <em>down</em> seconds. This cycle then repeats.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="error-modes">Error modes<a class="hash-link" href="#error-modes" title="Direct link to heading">​</a></h3><p>Several error-simulation behaviors can be configured.</p><ul><li><strong>drop_writes</strong> All write I/Os are silently ignored and dropped. Read I/Os
are handled correctly.</li><li><strong>error_writes</strong> All write I/Os are failed with an error signaled. Read I/Os
are handled correctly.</li><li><strong>corrupt_bio_byte</strong> During the <em>down</em> time, replace the Nth byte of the
data of each read or write block I/O with a specified value.</li></ul><p>The default error mode is to fail all I/O requests during the <em>down</em> time of the
simulation cycle.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="zoned-block-device-restrictions-1">Zoned Block Device Restrictions<a class="hash-link" href="#zoned-block-device-restrictions-1" title="Direct link to heading">​</a></h3><p>The same restrictions apply that applied for the <em>dm-linear</em> target.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="examples">Examples<a class="hash-link" href="#examples" title="Direct link to heading">​</a></h3><p><em>dm-linear</em> detailed documentation and usage examples can be found in the kernel
source code documentation file <a href="https://github.com/torvalds/linux/blob/master/Documentation/device-mapper/dm-flakey.txt" target="_blank" rel="noopener noreferrer">Documentation/device-mapper/dm-flakey.txt</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="dm-zoned">dm-zoned<a class="hash-link" href="#dm-zoned" title="Direct link to heading">​</a></h2><p>The <em>dm-zoned</em> device mapper target provides random write access to zoned
block devices (ZBC and ZAC compliant devices). It hides the sequential
write constraint of host-managed zoned block devices from the device user
(the &quot;device user&quot;, in this context, is a file system or an application
accessing a raw block device). This allows the use of applications and file
systems that do not have native zoned block device support.</p><p>File systems or applications that can natively support host-managed zoned
block devices (e.g. the f2fs file system since kernel 4.10) do not need to
use the <em>dm-zoned</em> device mapper target.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="design-overview">Design Overview<a class="hash-link" href="#design-overview" title="Direct link to heading">​</a></h3><p><em>dm-zoned</em> implements an on-disk write buffering scheme to handle random
write accesses to sequential write required zones of a zoned block device.
Conventional zones of the backend device are used for buffering random
accesses, as well as for storing internal metadata.</p><p>The figure below illustrates the <em>dm-zoned</em> zone-usage principle.</p><div class="container text--center"><figure><img src="/assets/images/linux-dm-zoned-7f01ae74923ff02b8d01c92fef2d376d.png" width="640" max-width="100%"><figcaption><em>Zone mapping overview of the dm-zoned device mapper target</em></figcaption></figure></div><p>Optionally, since Linux kernel version 5.8.0, an additional regular block
device can be used to provide randomly writable storage, replacing the
conventional zones of the backend zoned block device for write buffering. With
this new version of <em>dm-zoned</em>, multiple zoned block devices can also be used
to increase performance.</p><p>All zones of the device(s) used to back a <em>dm-zoned</em> target are separated into
2 types:</p><ol><li><p><strong>Metadata zones</strong> These are randomly-writable zones that are used to store
metadata.  Randomly writable zones may be conventional zones or sequential
write preferred zones (host-aware devices only). Metadata zones are not
reported as usable capacity to the user. If an additional regular block
device is used for write buffering, metadata zones are stored on this
cache device.</p></li><li><p><strong>Data zones</strong> All remaining zones of the device. The majority of these zones
are sequential zones, which are used exclusively for storing user data.
The conventional zones (or part of the sequential-write-preferred zones
on a host-aware device) may be used also for buffering user random writes.
User data may thus be stored either in conventional zone or in a sequential
zone.</p></li></ol><p>As shown in the above figure, the target device is divided into chunks that
have the same size as the zones of the backing zoned devices. A logical chunk
can be mapped to zones of the backing device in different ways.</p><ol><li><strong>Conventional or cache zone mapping</strong> This is the case for chunk <em>A</em> in the
figure, which is mapped to the conventional zone <em>C<sub>A</sub></em>. This is the
default mapping that is initialized when the first write command is issued
to an empty (unwritten) chunk. As long as a chunk is mapped to a
conventional zone, any incoming write request can be directly executed
using the mapped conventional zone.</li><li><strong>Sequential zone mapping</strong> A chunk can be mapped initially to a
sequential zone, as shown for the chunk <em>C</em> (mapped to the sequential zone
<em>S<sub>C</sub></em> in the figure). With such a mapping, an already-written
block of the chunk cannot be modified directly. To handle this case, the
next mapping type is used.</li><li><strong>Dual conventional-sequential zone mapping</strong> Temporarily add a conventional
zone to the chunk mapping when you need to update data in an already-written
block of a chunk that has been mapped to a sequential zone. Any write
that targets a written block will be processed using the conventional
zone instead of the sequential zone.</li></ol><p><em>dm-zoned</em> metadata include a set of bitmaps to track the validity state of
blocks in the zones of the backing device. Any write-operation execution is
always followed by an update to the bitmaps, to mark the written blocks as
valid. In the case of the dual conventional-sequential chunk mapping, the
bitmap for the blocks of the sequential zone is updated to clear the bits
that represent the blocks that have been updated with a write in the
conventional zone. By doing this, incoming reads always have access to the
latest version of the block data simply by inspecting the block validity
bitmaps.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="on-disk-format">On-Disk Format<a class="hash-link" href="#on-disk-format" title="Direct link to heading">​</a></h3><p><em>dm-zoned</em> exposes a logical device with a sector size of 4096 bytes,
regardless of the physical-sector size of the zoned block device that is
used as a backend . This reduces the amount of metadata needed to manage valid
blocks (blocks written). The on-disk metadata format is as follows:</p><ol><li><p><strong>Super Block</strong>: The first block of the first randomly-writable zone that is
found contains the super block, which describes the amount and position (on
the disk) of metadata blocks. </p></li><li><p><strong>Mapping-table blocks</strong>: After the super block, there is a set of blocks
that describes the mapping of (1) the logical chunks of the target logical
device to (2) data zones. The mapping is indexed by logical chunk number, and
each mapping entry indicates the data zone that stores the chunk data.
It can also indicate the zone number of a random zone that is used to
buffer random modifications to the chunk data.</p></li><li><p><strong>Bitmap-storage blocks</strong>: After the mapping-table blocks, there is a set of
blocks used to store bitmaps that indicate the validity of blocks in
the data zones. A valid block is any block that was written and not discarded.
In a buffered data zone, a block can be valid only (1) in the data zone or (2)
in the buffer zone.</p></li></ol><p>The device-mapper subsystem uses two sets of metadata zones, to protect
internal metadata against corruption in cases of sudden power loss or system
crashes. One set (the primary set) is used as the main metadata set. The other
set (the secondary set) is used as a log. Modified metadata are first written
to the secondary set. The log that is created by writing to the secondary set
is validated by writing an updated super block in the secondary set. After
this log operation completes, the primary metadata set is updtaed.  This
ensures that one of the sets is always correct.</p><p>Flush operations are used as a commit point: when a flush operation is
received, metadata activity is temporarily stopped, all dirty metadata
is logged and updated, and then normal operation resumes. Flush operations
temporarily delay write requests and discard requests. Read requests can be
processed while metadata logging is executed.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="read-write-processing">Read-Write Processing<a class="hash-link" href="#read-write-processing" title="Direct link to heading">​</a></h3><p>In logical chunks that are mapped to random data zones, all write operations
are processed by writing directly to the data zones. If the mapping zone is
mapped to a sequential zone, the write operation is processed directly only if
the write offset within the logical chunk is equal to the write pointer offset
within the sequential data zone (i.e. the write operation is aligned on the
zone write pointer). Otherwise, write operations are processed indirectly,
using a buffer zone: a randomly writable free data zone is allocated and
assigned to the chunk that is being accessed in addition to the already-mapped
sequential data zone. Writing blocks to the buffer zone will invalidate the
same blocks in the sequential data zone.</p><p>Read operations are processed according to the block validity information
provided by the bitmaps: valid blocks are read either from the data zone or,
if the data zone is buffered, from the buffer zone that is assigned to the data zone.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="random-zone-reclaim">Random Zone Reclaim<a class="hash-link" href="#random-zone-reclaim" title="Direct link to heading">​</a></h3><p>After some time, the limited number of available random zones may be exhausted,
making unaligned writes to unbuffered zones impossible. To avoid this
situation, a reclaim process regularly scans used random zones and tries to
&quot;reclaim&quot; them by (sequentially) copying the valid blocks of the buffer zone to
a free sequential zone. Once the copy completes, the chunk mapping is updated
to point to the sequential zone and the buffer zone is freed for reuse.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="userspace-tool">Userspace Tool<a class="hash-link" href="#userspace-tool" title="Direct link to heading">​</a></h3><p>The <em>dmzadm</em> command-line utility is used to format backend zoned devices for
use with the <em>dm-zoned</em> device mapper target. This utility verifies the
device zone model and prepares and writes on-disk <em>dm-zoned</em> metadata
according to the device&#x27;s capacity and zone size.</p><p>The source code for the <em>dmzadm</em> utility is available as part of
the <a href="https://github.com/westerndigitalcorporation/dm-zoned-tools" target="_blank" rel="noopener noreferrer"><em>dm-zoned-tools</em> project hosted on GitHub</a>.
The project <a href="https://github.com/westerndigitalcorporation/dm-zoned-tools/blob/master/README.md" target="_blank" rel="noopener noreferrer"><em>README</em> file</a> provides instructions on how to compile and
install the utility.</p><div class="admonition admonition-note alert alert--secondary"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</h5></div><div class="admonition-content"><p>The <em>dm-zoned-tools</em> project was formerly hosted on GitHub as part of
the <a href="https://github.com/hgst" target="_blank" rel="noopener noreferrer">HGST organization</a>.
<em>dm-zoned-tools</em> repository has since then moved to
the <a href="https://github.com/westerndigitalcorporation/" target="_blank" rel="noopener noreferrer">Western Digital Corporation organization on GitHub</a>.</p></div></div><p><em>dmzadm</em> detailed usage is as follows.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dmzadm --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">dmzadm allows formatting, checking and repairing</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">a zoned block device for use with the dm-zoned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device mapper.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: dmzadm &lt;operation&gt; &lt;device(s)&gt; [options]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Operations</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --help | -h   : General help message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --format      : Format a block device metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --check       : Check a block device metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --repair      : Repair a block device metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --start       : Start the device-mapper target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --stop        : Stop the device-mapper target</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Devices</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  For a single device target, a zoned block device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  must be specified. For a multi-device target, a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a list of block devices must be specified, with</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  a regular block device as the first device specified,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  followed by one or more zoned block devices.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">General options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --verbose     : Verbose output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --vverbose    : Very verbose output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Format operation options</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --force       : Force overwrite of existing content</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --label=&lt;str&gt; : Set the target label name to &lt;str&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --seq=&lt;num&gt;   : Number of sequential zones reserved</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  for reclaim. The minimum is 1 and the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  default is 16</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="formatting-a-target-device">Formatting a Target Device<a class="hash-link" href="#formatting-a-target-device" title="Direct link to heading">​</a></h3><p>Formatting a single device target is done using the following command:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dmzadm --format /dev/&lt;disk name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>where <code>/dev/&lt;disk name&gt;</code> identifies the backend zoned block device to use. An
example execution using a SMR hard-disk is shown below:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dmzadm --format /dev/sdi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdi: 29297213440 512-byte sectors (13970 GiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Host-managed device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  55880 zones, offset 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  55880 zones of 524288 512-byte sectors (256 MiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  65536 4KB data blocks per zone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resetting sequential zones</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing primary metadata set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing mapping table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing bitmap blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing super block to sdi block 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing secondary metadata set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing mapping table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing bitmap blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing super block to sdi block 131072</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Syncing disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>As of Linux kernel v5.8.0, <em>dm-zoned</em> can use regular block devices (such as
SSDs) together with zoned block devices. In this case, conventional zones are
emulated (so that the regular block device can hold <em>dm-zoned</em> metadata and
buffering data). When a regular block device is used, the zone-reclaim process
operates by copying data from emulated conventional zones on the regular block
device to zones of the zoned block device. This dual-drive configuration can
significantly increase the performance of the target device under
write-intensive workloads.</p><p>Use the following command to format a <em>dm-zoned</em> target device that uses an
additional regular block device (and, optionally, several zoned-block devices):</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dmzadm --format /dev/nvme2n1 /dev/sdi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/nvme2n1: 976773168 512-byte sectors (465 GiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Regular block device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1864 zones, offset 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdi: 29297213440 512-byte sectors (13970 GiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Host-managed device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  55880 zones, offset 122159104</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  57743 zones of 524288 512-byte sectors (256 MiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1 runt zone of 24624 512-byte sectors (12 MiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  65536 4KB data blocks per zone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Resetting sequential zones</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing primary metadata set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing mapping table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing bitmap blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing super block to nvme2n1 block 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing secondary metadata set</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing mapping table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing bitmap blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing super block to nvme2n1 block 131072</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing tertiary metadata</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Writing super block to sdi block 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Syncing disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Syncing disk</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Done.</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>(In this example <code>/dev/nvme2n1</code> is a NVMe SSD and <code>/dev/sdi</code> is a host-managed SMR hard-disk.)</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="activating-a-target-device">Activating a Target Device<a class="hash-link" href="#activating-a-target-device" title="Direct link to heading">​</a></h3><p>Start the <em>dm-zoned</em> target device (that is using a formatted zoned device or
set of devices) by running <em>dmzadm</em> with the <code>--start</code> command:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dmzadm --start /dev/sdi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdi: 29297213440 512-byte sectors (13970 GiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Host-managed device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  55880 zones, offset 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  55880 zones of 524288 512-byte sectors (256 MiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  65536 4KB data blocks per zone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sdi: starting dmz-sdi uuid 8c505b4b-d1e9-47a7-8e3a-8b1c00317eaf</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Confirm the target&#x27;s activation by looking at the kernel messages:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dmesg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (dmz-sdi): DM-Zoned metadata version 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (sdi): Host-managed zoned block device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (sdi):   29297213440 512-byte logical sectors (offset 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (sdi):   55880 zones of 524288 512-byte logical sectors (offset 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (dmz-sdi):   55880 zones of 524288 512-byte logical sectors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned: (dmz-sdi): Target device: 29286727680 512-byte logical sectors (3660840960 blocks)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The target device that was created is a regular disk that can be used with any
file system.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /sys/block/dm-0/queue/zoned</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">none</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># mkfs.ext4 /dev/dm-0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">mke2fs 1.45.5 (07-Jan-2020)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Discarding device blocks: done                            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Creating filesystem with 3660840960 4k blocks and 457605120 inodes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Filesystem UUID: d49ed278-5bca-46c4-8ce2-cec263dd060c</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Superblock backups stored on blocks: </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    32768, 98304, 163840, 229376, 294912, 819200, 884736, 1605632, 2654208, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    4096000, 7962624, 11239424, 20480000, 23887872, 71663616, 78675968, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    102400000, 214990848, 512000000, 550731776, 644972544, 1934917632, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    2560000000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Allocating group tables: done                            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing inode tables: done                            </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Creating journal (262144 blocks): done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Writing superblocks and filesystem accounting information: done</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># mount /dev/dm-0 /mnt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ls -l /mnt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">total 16</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">drwx------ 2 root root 16384 Aug 27 15:14 lost+found</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For a multi-device target, you must specify the same list of devices that you
specified when you formatted them:</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dmzadm --start /dev/nvmen2p1 /dev/sdi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/nvme2n1: 976773168 512-byte sectors (465 GiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Regular block device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1864 zones, offset 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">/dev/sdi: 29297213440 512-byte sectors (13970 GiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Host-managed device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  55880 zones, offset 122159104</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  57743 zones of 524288 512-byte sectors (256 MiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  1 runt zone of 24624 512-byte sectors (12 MiB)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  65536 4KB data blocks per zone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">nvme2n1: starting dmz-nvme2n1 uuid ffbd1a3a-d79b-4d7f-bc13-e475a157bc39</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Check the kernel messages to confirm the activation of the target device. This
is similar to confirming target-device activiation in the single-device case.</p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (dmz-nvme2n1): DM-Zoned metadata version 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (nvme2n1): Regular block device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (nvme2n1):   976773168 512-byte logical sectors (offset 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (nvme2n1):   1864 zones of 524288 512-byte logical sectors (offset 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (sdi): Host-managed zoned block device</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (sdi):   29297213440 512-byte logical sectors (offset 977272832)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (sdi):   55880 zones of 524288 512-byte logical sectors (offset 1864)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned metadata: (dmz-nvme2n1):   57744 zones of 524288 512-byte logical sectors</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">device-mapper: zoned: (dmz-nvme2n1): Target device: 30264000512 512-byte logical sectors (3783000064 blocks)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="stopping-a-target-device">Stopping a Target Device<a class="hash-link" href="#stopping-a-target-device" title="Direct link to heading">​</a></h3><p>Use the <code>--stop</code> operation to disable a <em>dm-zoned</em> target device: </p><div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dmzadm --stop /dev/sdX</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>For a multi-device target, you must specify the same list of devices that you
specified when you formatted them.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/linux/part"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Zoned Block Device Partition Support</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/linux/fs"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">File Systems</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#dm-linear" class="table-of-contents__link toc-highlight">dm-linear</a><ul><li><a href="#zoned-block-device-restrictions" class="table-of-contents__link toc-highlight">Zoned Block Device Restrictions</a></li><li><a href="#example-creating-a-small-host-managed-disk" class="table-of-contents__link toc-highlight">Example: Creating a Small Host Managed Disk</a></li><li><a href="#example-conventional-zones-as-a-regular-disk" class="table-of-contents__link toc-highlight">Example: Conventional Zones as a Regular Disk</a></li></ul></li><li><a href="#dm-flakey" class="table-of-contents__link toc-highlight">dm-flakey</a><ul><li><a href="#error-modes" class="table-of-contents__link toc-highlight">Error modes</a></li><li><a href="#zoned-block-device-restrictions-1" class="table-of-contents__link toc-highlight">Zoned Block Device Restrictions</a></li><li><a href="#examples" class="table-of-contents__link toc-highlight">Examples</a></li></ul></li><li><a href="#dm-zoned" class="table-of-contents__link toc-highlight">dm-zoned</a><ul><li><a href="#design-overview" class="table-of-contents__link toc-highlight">Design Overview</a></li><li><a href="#on-disk-format" class="table-of-contents__link toc-highlight">On-Disk Format</a></li><li><a href="#read-write-processing" class="table-of-contents__link toc-highlight">Read-Write Processing</a></li><li><a href="#random-zone-reclaim" class="table-of-contents__link toc-highlight">Random Zone Reclaim</a></li><li><a href="#userspace-tool" class="table-of-contents__link toc-highlight">Userspace Tool</a></li><li><a href="#formatting-a-target-device" class="table-of-contents__link toc-highlight">Formatting a Target Device</a></li><li><a href="#activating-a-target-device" class="table-of-contents__link toc-highlight">Activating a Target Device</a></li><li><a href="#stopping-a-target-device" class="table-of-contents__link toc-highlight">Stopping a Target Device</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/zoned-storage">Introduction to Zoned Storage</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started with Zoned Storage</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://app.element.io/#/room/#zonedstorage-general:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://join.slack.com/t/zonedstorage/shared_invite/zt-uyfut5xe-nKajp9YRnEWqiD4X6RkTFw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://webchat.oftc.net/?channels=zonedstorage" target="_blank" rel="noopener noreferrer" class="footer__link-item">IRC @ OFTC<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/westerndigitalcorporation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Organization<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_lCJq"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Western Digital
	Corporation or its affiliates. All rights reserved.<br> By using this site, you agree to the <a href="https://www.westerndigital.com/legal/terms-of-use" target="_blank">Terms of Use</a> and <a href="https://www.westerndigital.com/legal/privacy-statement" target="_blank">Privacy Statement</a>.  All example scripts and program snippets on this site are licensed under the <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank">CCO 1.0 Universal</a> license.<br>This site is built with <a href="https://docusaurus.io/" target="_blank">Docusaurus</a>.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.a0f59103.js"></script>
<script src="/assets/js/main.d8e174d5.js"></script>
</body>
</html>