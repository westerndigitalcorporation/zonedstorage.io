<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-tools/sg3utils" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">SCSI Generic Utilities | Zoned Storage</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://zonedstorage.io/docs/tools/sg3utils"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="SCSI Generic Utilities | Zoned Storage"><meta data-rh="true" name="description" content="Various open source projects provide tools that support the direct manipulation"><meta data-rh="true" property="og:description" content="Various open source projects provide tools that support the direct manipulation"><link data-rh="true" rel="icon" href="/img/zs-logo.ico"><link data-rh="true" rel="canonical" href="https://zonedstorage.io/docs/tools/sg3utils"><link data-rh="true" rel="alternate" href="https://zonedstorage.io/docs/tools/sg3utils" hreflang="en"><link data-rh="true" rel="alternate" href="https://zonedstorage.io/docs/tools/sg3utils" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"SCSI Generic Utilities","item":"https://zonedstorage.io/docs/tools/sg3utils"}]}</script><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0DX1KGD5E4"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-0DX1KGD5E4",{})</script><link rel="stylesheet" href="/assets/css/styles.0fff285b.css">
<script src="/assets/js/runtime~main.28008f1b.js" defer="defer"></script>
<script src="/assets/js/main.69b7e4e5.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard" data-theme="light">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/zs-logo.png" alt="Zoned Storage Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Zoned Storage</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/introduction">Documentation</a><a class="navbar__item navbar__link" href="/docs/community/support">Community</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/westerndigitalcorporation/zonedstorage.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-current"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/introduction">Introduction</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/getting-started">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/linux">Linux Kernel Support</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/device-mapper">Device Mapper</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/filesystems">File Systems</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/applications">Applications</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/tools">Tools and Libraries</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/util-linux">Linux System Utilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/zns">ZNS Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/tools/sg3utils">SCSI Generic Utilities</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/libzbc">libzbc User Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/libzbd">libzbd User Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/libnvme">libnvme User Library</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/tcmu-runner">tcmu-runner ZBC Disk Emulation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/tools/qemu">QEMU and KVM</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/tests">System Compliance Tests</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/benchmarking">Performance Benchmarking</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/distributions/overview">Linux Distributions</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faq">Frequently Asked Questions</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tools and Libraries</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">SCSI Generic Utilities</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>SCSI Generic Utilities</h1></header>
<p>Various open source projects provide tools that support the direct manipulation
of SCSI devices. The <em>lsscsi</em> command line tool and the <em>sg3_utils</em> library and
utilities collection are among the tools most widely used for SCSI device
manipulation. They are available as pre-compiled packages with most Linux®
distributions.</p>
<p><em>lsscsi</em> has the capability to indicate if a device is a ZBC host managed zoned
block device. <em>sg3_utils</em> added support for ZBC in version 1.42.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lsscsi">lsscsi<a href="#lsscsi" class="hash-link" aria-label="Direct link to lsscsi" title="Direct link to lsscsi">​</a></h2>
<p>The <a href="http://sg.danny.cz/scsi/lsscsi.html" target="_blank"><em>lsscsi</em></a>
command lists information about the SCSI devices that are connected to a Linux
system. <em>lsscsi</em> is available as a package in most Linux distributions. For
example, in <a href="/docs/distributions/fedora">Fedora®</a> Linux, <em>lssci</em> can be
installed using the following command:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># dnf install lsscsi</span><br></span></code></pre></div></div>
<p>The name of the package may differ from distribution to distribution. Refer to
the documentation of the given distribution to discover the name of the package
that provides <em>lssci</em>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="identifying-host-managed-disks">Identifying Host Managed Disks<a href="#identifying-host-managed-disks" class="hash-link" aria-label="Direct link to Identifying Host Managed Disks" title="Direct link to Identifying Host Managed Disks">​</a></h3>
<p><em>lsscsi</em> lists the disks that are managed using the kernel SCSI subsystem. This
always includes SATA disks that are directly connected (1) to a SATA port on
the system mainboard or (2) to a SATA PCIe adapter.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># lsscsi</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2:0:0:0]    disk    ATA      INTEL SSDSC2CT18 335u  /dev/sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[4:0:0:0]    zbc     ATA      HGST HSH721414AL T220  /dev/sdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[10:0:1:0]   zbc     HGST     HSH721414AL52M0  a220  /dev/sdc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[10:0:3:0]   zbc     ATA      HGST HSH721415AL T220  /dev/sdd</span><br></span></code></pre></div></div>
<p>The second column of the default output indicates the device type. For host
managed disks, the type name is <code>zbc</code>. For regular disks, the type name is
<code>disk</code>. Older versions of <em>lsscsi</em> may directly list the numerical value of the
device type. In the case of host managed disks, <code>0x14</code> is displayed.</p>
<p>Adding the option <code>-g</code> to the <em>lssci</em> command returns the SCSI Generic node
file path associated with a device. This can be useful in combination with
<a href="/docs/tools/libzbc">libzbc</a> or any of the <em>sg3_utils</em> command line tools.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># lsscsi -g</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2:0:0:0]    disk    ATA      INTEL SSDSC2CT18 335u  /dev/sda   /dev/sg0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[4:0:0:0]    zbc     ATA      HGST HSH721414AL T220  /dev/sdb   /dev/sg1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[10:0:1:0]   zbc     HGST     HSH721414AL52M0  a220  /dev/sdc   /dev/sg2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[10:0:3:0]   zbc     ATA      HGST HSH721415AL T220  /dev/sdd   /dev/sg3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="disks-interface-and-transport">Disks Interface and Transport<a href="#disks-interface-and-transport" class="hash-link" aria-label="Direct link to Disks Interface and Transport" title="Direct link to Disks Interface and Transport">​</a></h3>
<p>The third column of the output is the disk vendor ID. For ATA disks, this is
always <code>ATA</code> even for ATA disks connected to a SAS host-bus-adapter (HBA). The
<em>transport</em> that is used to communicate with the disk can be more precisely
discovered using the <code>-t</code> option.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># lsscsi -t</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[2:0:0:0]    disk    sata:55cd2e4000111f9b           /dev/sda</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[4:0:0:0]    zbc     sata:5000cca25bc03731           /dev/sdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[10:0:1:0]   zbc     sas:0x5000cca0000025c5          /dev/sdc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">[10:0:3:0]   zbc     sas:0x300062b200f35d43          /dev/sdd</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="sg3_utils">sg3_utils<a href="#sg3_utils" class="hash-link" aria-label="Direct link to sg3_utils" title="Direct link to sg3_utils">​</a></h2>
<p>The <a href="http://sg.danny.cz/sg/sg3_utils.html" target="_blank"><em>sg3_utils</em></a> project provides a library and a collection of
command line tools that directly send SCSI commands to SCSI devices using the
kernel SCSI generic driver.</p>
<p>The SCSI generic driver (<em>sg</em> driver) is enabled by default on most
distributions. Use the following command to check whether the <em>sg</em> driver
module is loaded:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># cat /proc/modules | grep sg</span><br></span></code></pre></div></div>
<p>If the output of this command is empty, the <em>sg</em> driver is loaded:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># modprobe sg</span><br></span></code></pre></div></div>
<p>These commands work only if the <em>sg</em> driver was compiled as a loadable kernel
module. If you experience errors (as shown below), use the command (the <code>cat</code>
command after the error message) to verify that the <em>sg</em> driver was compiled as
part of the kernel:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># modprobe sg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">modinfo: ERROR: Module sg not found.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># cat /lib/modules/`uname -r`/modules.builtin | grep sg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">kernel/drivers/scsi/sg.ko</span><br></span></code></pre></div></div>
<p>Because all disks in Linux are exposed as SCSI devices (including all ATA
drives), these utilities can be used to manage both (1) SCSI ZBC disks and (2)
SATA ZAC disks. For cases in which SATA disks are connected to SATA ports (e.g.
an AHCI adapter), the kernel SCSI subsystem translates SCSI commands to ATA
commands.</p>
<p><em>sg3_utils</em> includes three command line tools that are specific to ZBC disks:</p>
<center><table><thead><tr><th style="text-align:center">Utility Name</th><th style="text-align:left">Main SCSI Command Invoked</th><th style="text-align:left">Description</th></tr></thead><tbody><tr><td style="text-align:center"><strong>sg_rep_zones</strong></td><td style="text-align:left">REPORT ZONES</td><td style="text-align:left">Get a ZBC disk zone information</td></tr><tr><td style="text-align:center"><strong>sg_reset_wp</strong></td><td style="text-align:left">RESET WRITE POINTER</td><td style="text-align:left">Reset one or all zones of a ZBC disk</td></tr><tr><td style="text-align:center"><strong>sg_zone</strong></td><td style="text-align:left">CLOSE ZONE, FINISH ZONE, OPEN ZONE</td><td style="text-align:left">Sends one of these commands to the given ZBC device</td></tr></tbody></table></center>
<div class="theme-admonition theme-admonition-caution admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_BuS1"><p>The help output of the commands below uses the term &quot;LBA&quot;. In this context,
&quot;LBA&quot; refers to a 512-byte sector size regardless of the logical and physical
block size of the disk.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sg_rep_zone">sg_rep_zone<a href="#sg_rep_zone" class="hash-link" aria-label="Direct link to sg_rep_zone" title="Direct link to sg_rep_zone">​</a></h3>
<p>Running the command <code>sg_rep_zone</code> with the <code>--help</code> option returns a simple
usage explanation.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_rep_zones --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: sg_rep_zones  [--help] [--hex] [--maxlen=LEN] [--partial]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     [--raw] [--readonly] [--report=OPT] [--start=LBA]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                     [--verbose] [--version] DEVICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  where:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --help|-h          print out usage message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --hex|-H           output response in hexadecimal; used twice</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       shows decoded values in hex</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --maxlen=LEN|-m LEN    max response length (allocation length in cdb)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                           (def: 0 -&gt; 8192 bytes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --partial|-p       sets PARTIAL bit in cdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --raw|-r           output response in binary</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --readonly|-R      open DEVICE read-only (def: read-write)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --report=OPT|-o OP    reporting options (def: 0: all zones)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --start=LBA|-s LBA    report zones from the LBA (def: 0)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                          need not be a zone starting LBA</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --verbose|-v       increase verbosity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --version|-V       print version string and exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Performs a SCSI REPORT ZONES command.</span><br></span></code></pre></div></div>
<p>Below is an example of the <code>sg_rep_zone</code> utility output:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_rep_zone /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Report zones response:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Same=1: zone type and length same in each descriptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Maximum LBA: 0xda47ffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Conventional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Not write pointer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0xffffffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Conventional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Not write pointer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0xffffffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Conventional</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Not write pointer</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x20000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0xffffffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ...</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Either (1) the block device file path or (2) the device SCSI Generic node file
path can be used to specify a disk.</p></div></div>
<p>It is possible to start a zone report at a specific zone by using the
<code>--start</code> option. For example, to obtain the zone information starting at the
first sequential zone of the disk (LBA 34340864), use the following command:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_rep_zones --start=34340864 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Report zones response:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Same=1: zone type and length same in each descriptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Maximum LBA: 0xda47ffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Sequential write required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Sequential write required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x20d0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0x20d0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ...</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sg_reset_wp">sg_reset_wp<a href="#sg_reset_wp" class="hash-link" aria-label="Direct link to sg_reset_wp" title="Direct link to sg_reset_wp">​</a></h3>
<p>Running the command <code>sg_reset_wp</code> with the <code>--help</code> option returns a simple
usage explanation:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_reset_wp --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: sg_reset_wp  [--all] [--help] [--verbose] [--version]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    [--zone=ID] DEVICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  where:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --all|-a           sets the ALL flag in the cdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --help|-h          print out usage message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --verbose|-v       increase verbosity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --version|-V       print version string and exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --zone=ID|-z ID    ID is the starting LBA of the zone whose</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                       write pointer is to be reset</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Performs a SCSI RESET WRITE POINTER command. ID is decimal by default,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">for hex use a leading &#x27;0x&#x27; or a trailing &#x27;h&#x27;. Either the --zone=ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">or --all option needs to be given.</span><br></span></code></pre></div></div>
<p>Reset all sequential write zones on the disk by using the <code>--all</code> option:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_reset_wp --all /dev/sdd</span><br></span></code></pre></div></div>
<p>Reset a single sequential zone write pointer by using the <code>--zone</code> option:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_reset_wp --zone=34340864 /dev/sdd</span><br></span></code></pre></div></div>
<p>Specifying the zone ID (zone start LBA) of a conventional zone results in
an error:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_reset_wp --zone=0 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Reset write pointer command: Illegal request</span><br></span></code></pre></div></div>
<p>Reseting the write pointer of an empty sequential write zone has no effect
and does not result in an error.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sg_zone">sg_zone<a href="#sg_zone" class="hash-link" aria-label="Direct link to sg_zone" title="Direct link to sg_zone">​</a></h3>
<p>Running the command <code>sg_zone</code> with the <code>--help</code> option returns a simple usage
explanation:</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_zone --help</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Usage: sg_zone  [--all] [--close] [--finish] [--help] [--open]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                [--verbose] [--version] [--zone=ID] DEVICE</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  where:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --all|-a           sets the ALL flag in the cdb</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --close|-c         issue CLOSE ZONE command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --finish|-f        issue FINISH ZONE command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --help|-h          print out usage message</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --open|-o          issue OPEN ZONE command</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --verbose|-v       increase verbosity</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --version|-V       print version string and exit</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    --zone=ID|-z ID    ID is the starting LBA of the zone</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*sg_zone* can perform OPEN ZONE, CLOSE ZONE or FINISH ZONE SCSI commands. ID is</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">decimal by default. To enter a hexadecimal value, use a leading &#x27;0x&#x27; or a</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">trailing &#x27;h&#x27;. One of the following options must be provided: (1) `--close`, (2)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">`--finish`, or (3) `--open`.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">There is no `--reset` option. Such an option would duplicate the function of</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">the *sg_reset_wp* utility.</span><br></span></code></pre></div></div>
<p>The following example shows a sequence of commands that illustrate the effects
that the <em>sg_zone</em> and <em>sg_reset_wp</em> commands have on the condition of a zone,
as reported with <em>sg_rep_zone</em>. At the beginning of this sequence of commands,
the sequential zone on the disk is explicitly opened from an empty condition.
Then the zone is transitioned to a full condition by using the &quot;zone finish&quot;
command. Finally, the zone is again reset to an empty condition.</p>
<div class="language-plaintext codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-plaintext codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># sg_rep_zones --start=34340864 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Report zones response:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Same=1: zone type and length same in each descriptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Maximum LBA: 0xda47ffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Sequential write required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># sg_zone --open --zone=34340864 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># sg_rep_zones --start=34340864 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Report zones response:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Same=1: zone type and length same in each descriptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Maximum LBA: 0xda47ffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Sequential write required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Explicitly opened</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># sg_zone --finish --zone=34340864 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># sg_rep_zones --start=34340864 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Report zones response:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Same=1: zone type and length same in each descriptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Maximum LBA: 0xda47ffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Sequential write required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Full</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0xffffffffffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># sg_reset_wp --zone=34340864 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># sg_rep_zones --start=34340864 /dev/sdd</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Report zones response:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Same=1: zone type and length same in each descriptor</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Maximum LBA: 0xda47ffff</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> Zone descriptor: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone type: Sequential write required</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone condition: Empty</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Non_seq: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Reset: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone Length: 0x10000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Zone start LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   Write pointer LBA: 0x20c0000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ...</span><br></span></code></pre></div></div></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/tools/zns"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">ZNS Tools</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/tools/libzbc"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">libzbc User Library</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#lsscsi" class="table-of-contents__link toc-highlight">lsscsi</a><ul><li><a href="#identifying-host-managed-disks" class="table-of-contents__link toc-highlight">Identifying Host Managed Disks</a></li><li><a href="#disks-interface-and-transport" class="table-of-contents__link toc-highlight">Disks Interface and Transport</a></li></ul></li><li><a href="#sg3_utils" class="table-of-contents__link toc-highlight">sg3_utils</a><ul><li><a href="#sg_rep_zone" class="table-of-contents__link toc-highlight">sg_rep_zone</a></li><li><a href="#sg_reset_wp" class="table-of-contents__link toc-highlight">sg_reset_wp</a></li><li><a href="#sg_zone" class="table-of-contents__link toc-highlight">sg_zone</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/introduction/zoned-storage">Introduction to Zoned Storage</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started with Zoned Storage</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://app.element.io/#/room/#zonedstorage-general:matrix.org" target="_blank" rel="noopener noreferrer" class="footer__link-item">Matrix<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/westerndigitalcorporation" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub Organization<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Western Digital
	Corporation or its affiliates. All rights reserved.<br> By using this site, you agree to the <a href="https://www.westerndigital.com/legal/terms-of-use" target="_blank">Terms of Use</a> and <a href="https://www.westerndigital.com/legal/privacy-statement" target="_blank">Privacy Statement</a>.  All example scripts and program snippets on this site are licensed under the <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank">CCO 1.0 Universal</a> license.<br>This site is built with <a href="https://docusaurus.io/" target="_blank">Docusaurus</a>.</div></div></div></footer></div>
</body>
</html>